### BIND-primary server ###
####linuxcbtserv2###

# Edit the BIND configuration file
vi /etc/named.conf

# View the RFC 1912 zone files
cat /etc/named.rfc1912.zones

# Edit named.conf to define the zone for linuxcbt.internal
vi /etc/named.conf
#####classroom ##
zone "linuxcbt.internal" IN {
    type master;
    file "linuxcbt.internal";
    allow-update { none; };
};

# Restart the named (BIND) service
service named restart

# Navigate to the directory where BIND stores zone files
cd /var/named/

# List files to check for named.localhost
ls -l

# View named.localhost file contents
cat named.localhost

# Copy named.localhost to linuxcbt.internal to create a new zone file
cp named.localhost linuxcbt.internal

# Edit linuxcbt.internal zone file to define DNS records
vi linuxcbt.internal
$TTL 60
@   IN SOA  linuxcbt.internal. vdns-admin.linuxcbt.internal. (
               2017121506  ; serial
               1D          ; refresh
               1H          ; retry
               1W          ; expire
               3H )        ; minimum
           IN NS   linuxcbtserv2.linuxcbt.internal.
linuxcbtserv2   IN A    192.168.75.21
www    IN CNAME    linuxcbtserv2.linuxcbt.internal.

# Check running named processes
ps -ef | grep -i named

# View open TCP connections to verify BIND is listening
netstat -ant

# View named service logs
cat /var/named/data/named.run

# Change ownership of the zone file to root.named
chown root.named linuxcbt.internal

# List files in the directory to verify ownership
ls -l

# Restart the named service to apply changes
systemctl restart named.service

# View the end of named service logs to check for errors
tail data/named.run


###linuxcbtsev1###

# Query localhost DNS server for linuxcbtserv2.linuxcbt.internal
dig @localhost linuxcbtserv2.linuxcbt.internal

# Query DNS server at 192.168.75.21 for NS records of linuxcbt.internal
dig @192.168.75.21 linuxcbt.internal NS


###linuxcbtsev2###

# Edit linuxcbt.internal zone file to add CNAME and MX records
vi linuxcbt.internal
www    IN CNAME    linuxcbtserv2.linuxcbt.internal.
           IN MX 2   linuxcbtserv1.linuxcbt.internal.

# Restart named service after making changes
systemctl restart named.service

# View the end of named service logs to check for errors
tail data/named.run

# Change ownership of the zone file to root.named
chown root.named linuxcbt.internal

# Restart named service again to apply ownership changes
systemctl restart named.service

# View the end of named service logs again
tail data/named.run

# Query localhost DNS server for NS, MX, CNAME records of linuxcbt.internal
dig @localhost linuxcbt.internal NS
dig @localhost linuxcbt.internal MX
dig @localhost linuxcbt.internal CNAME
dig @localhost www.linuxcbt.internal

# Edit linuxcbt.internal zone file to add A and NS records for linuxcbtserv1
vi linuxcbt.internal
linuxcbtserv1   IN A    192.168.75.20
@   IN NS   linuxcbtserv1.linuxcbt.internal.

# Restart named service after adding linuxcbtserv1 records
systemctl restart named.service

# View the end of named service logs to check for errors
tail data/named.run

# Query localhost DNS server for MX record of linuxcbt.internal
dig @localhost linuxcbt.internal MX

# Query localhost DNS server for A record of linuxcbtserv1.linuxcbt.internal
dig @localhost linuxcbtserv1.linuxcbt.internal

# Edit linuxcbt.internal zone file to update www record to point to linuxcbtserv2
vi linuxcbt.internal
www    IN CNAME    linuxcbtserv2.linuxcbt.internal.

# Restart named service after updating www record
systemctl restart named.service

# View the end of named service logs to check for errors
tail data/named.run

# Configure firewall to allow DNS traffic over TCP and UDP ports 53
firewall-cmd --permanent --add-port=53/tcp
iptables -I INPUT -p udp -m udp --dport 53 -j ACCEPT

# Reload firewall rules to apply changes
firewall-cmd --reload
service iptables save

Here's the continuation with comments for each command line:


# Restart iptables service to apply firewall rules
service iptables restart

# Restart named service to apply DNS configuration changes
systemctl restart named.service

# View the end of named service logs to check for any errors or warnings
tail data/named.run

# Query localhost DNS server for A record of linuxcbtserv1.linuxcbt.internal
dig @localhost linuxcbtserv1.linuxcbt.internal

# Query localhost DNS server for A record of linuxcbtserv2.linuxcbt.internal
dig @localhost linuxcbtserv2.linuxcbt.internal

# Query localhost DNS server for MX record of linuxcbt.internal
dig @localhost linuxcbt.internal MX

# Secure copy (scp) linuxcbt.internal zone file to 192.168.75.20 server
scp linuxcbt.internal 192.168.75.20:

###linuxcbtsev1###

# SSH login as root user to 192.168.75.20 server
ssh root@192.168.75.20

# Install BIND package on linuxcbtsev1 server using Yum package manager
yum install bind -y

# Edit /etc/named.conf to configure BIND settings
vi /etc/named.conf
#listen-on port 53 {192.168.75.20; };
allow-query     { any; };
#####classroom ##
zone "linuxcbt.external" IN {
    type master;
    file "linuxcbt.external";
    allow-update { none; };
};

# Move linuxcbt.internal zone file to /var/named/ and rename to linuxcbt.external
mv linuxcbt.internal /var/named/linuxcbt.external

# Change ownership of linuxcbt.internal zone file to root.named
chown root.named linuxcbt.internal

# Restart named service to apply changes (if error occurs, try service named reload)
systemctl restart named.service

# Append linuxcbt.internal.ca contents to linuxcbt.internal zone file
cat linuxcbt.internal.ca >> linuxcbt.internal

# Restart named service again (if systemctl restart named.service fails, try service named reload)
systemctl restart named.service

# Query localhost DNS server for A record of linuxcbtserv1.linuxcbt.external
dig @localhost linuxcbtserv1.linuxcbt.external

# Query 192.168.75.20 DNS server for linuxcbt.external zone
dig @192.168.75.20 linuxcbt.external

# Query 192.168.75.20 DNS server for www.linuxcbt.external
dig @192.168.75.20 www.linuxcbt.external

# Query 192.168.75.20 DNS server for MX record of linuxcbt.external
dig @192.168.75.20 linuxcbt.external MX
```
Here are the commands with comments added for each step related to configuring BIND DNS servers, setting up secondary zones, and configuring reverse zones:


